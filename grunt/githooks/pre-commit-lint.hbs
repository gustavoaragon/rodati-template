'use strict';

var child   = require('child_process');
var clc     = require('cli-color');

child.exec('git diff-index --name-only HEAD', function (err, stdout, stderr) {

	if((stdout.indexOf('server/') > -1) || (stdout.indexOf('public/') > -1)){

		console.log(clc.green.bold.underline('\nRunning hook \'grunt lint\'\n'));

		child.spawn('grunt', ['lint'], {stdio:'inherit'}).on('close', function (code) {

			if (code !== 0) {

				console.log(clc.red.bold('There was an error running the hook \'grunt lint\''));
				console.log(clc.red.bold('Please check the log or run \'grunt lint\' to see the output'));

				{{#unless preventExit}}
					process.exit(code);
				{{/unless}}

			} else {

				console.log(clc.green.bold('Hook \'grunt lint\' without errors'));

			}

		});

	}

});