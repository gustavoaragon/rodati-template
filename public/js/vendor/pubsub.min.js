!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["exports"],b):b("object"==typeof exports?exports:a.PubSub={})}("object"==typeof window&&window||this,function(a){"use strict";function b(a){var b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1}function c(a){return function(){throw a}}function d(a,b,d){try{a(b,d)}catch(e){setTimeout(c(e),0)}}function e(a,b,c){a(b,c)}function f(a,b,c,f){var g,h=j[b],i=f?e:d;if(j.hasOwnProperty(b))for(g in h)h.hasOwnProperty(g)&&i(h[g],a,c)}function g(a,b,c){return function(){var d=String(a),e=d.lastIndexOf(".");for(f(a,a,b,c);-1!==e;)d=d.substr(0,e),e=d.lastIndexOf("."),f(a,d,b)}}function h(a){for(var c=String(a),d=Boolean(j.hasOwnProperty(c)&&b(j[c])),e=c.lastIndexOf(".");!d&&-1!==e;)c=c.substr(0,e),e=c.lastIndexOf("."),d=Boolean(j.hasOwnProperty(c)&&b(j[c]));return d}function i(a,b,c,d){var e=g(a,b,d),f=h(a);return f?(c===!0?e():setTimeout(e,0),!0):!1}var j={},k=-1;a.publish=function(b,c){return i(b,c,!1,a.immediateExceptions)},a.publishSync=function(b,c){return i(b,c,!0,a.immediateExceptions)},a.subscribe=function(a,b){if("function"!=typeof b)return!1;j.hasOwnProperty(a)||(j[a]={});var c="uid_"+String(++k);return j[a][c]=b,c},a.clearAllSubscriptions=function(){j={}},a.unsubscribe=function(a){var b,c,d,e="string"==typeof a&&j.hasOwnProperty(a),f=!e&&"string"==typeof a,g="function"==typeof a,h=!1;if(e)return void delete j[a];for(b in j)if(j.hasOwnProperty(b)){if(c=j[b],f&&c[a]){delete c[a],h=a;break}if(g)for(d in c)c.hasOwnProperty(d)&&c[d]===a&&(delete c[d],h=!0)}return h}});